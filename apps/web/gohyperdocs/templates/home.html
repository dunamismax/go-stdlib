{{define "home.html"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
    <script src="/static/htmx.min.js"></script>
</head>
<body hx-boost="true">
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="/">GoHyperDocs</a>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="/" class="nav-link">Home</a>
                <a href="/category/getting-started" class="nav-link">Getting Started</a>
                <a href="/category/htmx-features" class="nav-link">HTMX Features</a>
                <a href="/category/go-backend" class="nav-link">Go Backend</a>
                <a href="/category/deployment" class="nav-link">Deployment</a>
            </div>
            <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-search">
                <input type="search" 
                       id="search-input"
                       hx-get="/api/search" 
                       hx-target="#search-results"
                       hx-trigger="input changed delay:300ms"
                       hx-vals="js:{q: document.getElementById('search-input').value}"
                       placeholder="Search docs..."
                       class="search-input">
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="content-wrapper">
            <aside class="sidebar">
                {{if .Categories}}
                    {{range $category, $sections := .Categories}}
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">
                            <a href="/category/{{$category}}">{{$category}}</a>
                        </h3>
                        <ul class="sidebar-list">
                            {{range $sections}}
                            <li><a href="/section/{{.Slug}}" class="sidebar-link">{{.Title}}</a></li>
                            {{end}}
                        </ul>
                    </div>
                    {{end}}
                {{end}}
            </aside>

            <main class="main-content" id="main-content">
                <div class="hero">
                    <h1>GoHyperDocs</h1>
                    <p class="hero-subtitle">Build lightning-fast web applications with Go's standard library and HTMX. Single binary deployment, 50K+ concurrent connections, zero dependencies.</p>
                    <div class="hero-features">
                        <div class="feature">
                            <h3>Lightning Fast</h3>
                            <p>0.2ms response times with compiled Go and embedded SQLite</p>
                        </div>
                        <div class="feature">
                            <h3>Hypermedia Driven</h3>
                            <p>Rich interactions through HTML over the wire</p>
                        </div>
                        <div class="feature">
                            <h3>Zero Dependencies</h3>
                            <p>Built with Go's standard library only</p>
                        </div>
                        <div class="feature">
                            <h3>Single Binary</h3>
                            <p>Everything embedded - just copy and run</p>
                        </div>
                    </div>
                </div>

                <div class="tech-stack">
                    <h2>Core Technologies</h2>
                    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 3rem; font-size: 1.1rem; max-width: 600px; margin-left: auto; margin-right: auto;">Carefully chosen for stability, performance, and longevity.</p>
                    <div class="stack-grid">
                        <div class="stack-item">
                            <h3>Go + net/http.ServeMux</h3>
                            <p>Modern routing with method patterns, path parameters, and middleware chains.</p>
                            <div class="tech-benefits">
                                <span class="benefit">Compile-time safety</span>
                                <span class="benefit">Sub-microsecond routing</span>
                                <span class="benefit">Built-in concurrency</span>
                            </div>
                            <span class="badge">Pure Go</span>
                        </div>
                        <div class="stack-item">
                            <h3>HTMX + html/template</h3>
                            <p>Hypermedia-driven interfaces with automatic XSS protection.</p>
                            <div class="tech-benefits">
                                <span class="benefit">Progressive enhancement</span>
                                <span class="benefit">Accessible by default</span>
                                <span class="benefit">XSS protection</span>
                            </div>
                            <span class="badge">Hypermedia</span>
                        </div>
                        <div class="stack-item">
                            <h3>SQLite + CGO-free</h3>
                            <p>Zero-latency embedded database with modernc.org/sqlite driver.</p>
                            <div class="tech-benefits">
                                <span class="benefit">50K+ queries/sec</span>
                                <span class="benefit">Single file database</span>
                                <span class="benefit">ACID transactions</span>
                            </div>
                            <span class="badge">Self-Contained</span>
                        </div>
                        <div class="stack-item">
                            <h3>Mage + Air</h3>
                            <p>Go-based build system with live reloading for rapid development.</p>
                            <div class="tech-benefits">
                                <span class="benefit">Go-based builds</span>
                                <span class="benefit">Live reloading</span>
                                <span class="benefit">Cross-compilation</span>
                            </div>
                            <span class="badge">Developer Experience</span>
                        </div>
                        <div class="stack-item">
                            <h3>go:embed + Static Assets</h3>
                            <p>All assets embedded directly in the binary for zero-dependency deployment.</p>
                            <div class="tech-benefits">
                                <span class="benefit">Single binary</span>
                                <span class="benefit">No external deps</span>
                                <span class="benefit">Instant loading</span>
                            </div>
                            <span class="badge">Embedded</span>
                        </div>
                        <div class="stack-item">
                            <h3>Vanilla CSS + Modern Features</h3>
                            <p>Modern CSS with Grid, Flexbox, and custom properties. No build tools required.</p>
                            <div class="tech-benefits">
                                <span class="benefit">Custom properties</span>
                                <span class="benefit">Responsive design</span>
                                <span class="benefit">Smooth animations</span>
                            </div>
                            <span class="badge">Modern CSS</span>
                        </div>
                    </div>
                </div>

                <div class="quick-links">
                    <h2>Quick Start</h2>
                    <div class="links-grid">
                        <a href="/category/getting-started" class="quick-link">
                            <h3>Getting Started</h3>
                            <p>Setup and basic concepts</p>
                        </a>
                        <a href="/category/htmx-features" class="quick-link">
                            <h3>HTMX Features</h3>
                            <p>Interactive demonstrations</p>
                        </a>
                        <a href="/category/go-backend" class="quick-link">
                            <h3>Go Backend</h3>
                            <p>Server implementation</p>
                        </a>
                        <a href="/category/deployment" class="quick-link">
                            <h3>Deployment</h3>
                            <p>Production setup with Ubuntu + Caddy</p>
                        </a>
                    </div>
                </div>

                <!-- Live Demo Section -->
                <div class="live-demo">
                    <h2>Live Demo Showcase</h2>
                    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 3rem; font-size: 1.1rem;">
                        Experience hypermedia interactions with these interactive demonstrations
                    </p>
                    <div class="demo-showcase">
                        <!-- Live Stats Counter -->
                        <div class="demo-item">
                            <h3>Live Stats Counter</h3>
                            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                                Dynamic server statistics updated with HTMX
                            </p>
                            <div id="visitor-stats" 
                                 hx-get="/api/demo/live-counter" 
                                 hx-trigger="load, every 5s"
                                 hx-target="this" 
                                 hx-swap="innerHTML">
                                <div class="loading">Loading stats...</div>
                            </div>
                        </div>

                        <!-- Interactive Todo Demo -->
                        <div class="demo-item">
                            <h3>Interactive Todo Demo</h3>
                            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                                Add and manage tasks with smooth HTMX interactions
                            </p>
                            <div hx-get="/api/demo/todo" 
                                 hx-trigger="load"
                                 hx-target="this" 
                                 hx-swap="innerHTML">
                                <div class="loading">Loading todo demo...</div>
                            </div>
                        </div>

                        <!-- Tab Navigation Demo -->
                        <div class="demo-item">
                            <h3>Tab Navigation Demo</h3>
                            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                                Smooth tab switching with HTMX content loading
                            </p>
                            <div class="tab-demo">
                                <div class="tab-navigation">
                                    <button class="tab-button active" 
                                            hx-get="/api/demo/tabs?tab=overview" 
                                            hx-target="#tab-content"
                                            onclick="setActiveTab(this)">
                                        Overview
                                    </button>
                                    <button class="tab-button" 
                                            hx-get="/api/demo/tabs?tab=features" 
                                            hx-target="#tab-content"
                                            onclick="setActiveTab(this)">
                                        Features
                                    </button>
                                    <button class="tab-button" 
                                            hx-get="/api/demo/tabs?tab=performance" 
                                            hx-target="#tab-content"
                                            onclick="setActiveTab(this)">
                                        Performance
                                    </button>
                                </div>
                                <div id="tab-content" 
                                     hx-get="/api/demo/tabs?tab=overview"
                                     hx-trigger="load"
                                     hx-target="this"
                                     hx-swap="innerHTML">
                                    <div class="loading">Loading content...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="call-to-action">
                    <h2>Ready to Experience the Future?</h2>
                    <p>Single 12MB binary with zero dependencies. Handles 50K+ concurrent users with sub-millisecond responses. Deploy anywhere with Ubuntu + Caddy.</p>
                    <div class="cta-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 2rem; margin: 2rem 0;">
                        <div class="cta-stat">
                            <span class="stat-value">0.2ms</span>
                            <span class="stat-label">Response Time</span>
                        </div>
                        <div class="cta-stat">
                            <span class="stat-value">12MB</span>
                            <span class="stat-label">Binary Size</span>
                        </div>
                        <div class="cta-stat">
                            <span class="stat-value">50K+</span>
                            <span class="stat-label">Concurrent Users</span>
                        </div>
                        <div class="cta-stat">
                            <span class="stat-value">0</span>
                            <span class="stat-label">Dependencies</span>
                        </div>
                    </div>
                    <div class="cta-buttons">
                        <a href="/category/getting-started" class="btn btn-primary">Start Your Journey</a>
                        <a href="/category/htmx-features" class="btn btn-secondary">See It In Action</a>
                    </div>
                </div>
            </main>
        </div>

        <div id="search-results" class="search-results"></div>
    </div>

    <script>
        // Mobile menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const navMenu = document.getElementById('nav-menu');
            
            if (mobileMenuToggle && navMenu) {
                mobileMenuToggle.addEventListener('click', function() {
                    mobileMenuToggle.classList.toggle('active');
                    navMenu.classList.toggle('active');
                });
                
                // Close menu when clicking outside
                document.addEventListener('click', function(e) {
                    if (!mobileMenuToggle.contains(e.target) && !navMenu.contains(e.target)) {
                        mobileMenuToggle.classList.remove('active');
                        navMenu.classList.remove('active');
                    }
                });
                
                // Close menu when clicking on a link
                navMenu.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', function() {
                        mobileMenuToggle.classList.remove('active');
                        navMenu.classList.remove('active');
                    });
                });
            }
        });

        // Copy to clipboard functionality
        function copyToClipboard(button, code) {
            navigator.clipboard.writeText(code).then(function() {
                // Trigger HTMX call to update button state
                htmx.ajax('POST', '/api/copy', {
                    target: button,
                    swap: 'outerHTML'
                });
                
                // Reset button after 2 seconds
                setTimeout(function() {
                    button.textContent = 'Copy';
                    button.classList.remove('copied');
                    button.disabled = false;
                }, 2000);
            }).catch(function(err) {
                console.error('Failed to copy: ', err);
            });
        }

        // Tab switching functionality
        function setActiveTab(clickedButton) {
            // Remove active class from all tabs
            document.querySelectorAll('.tab-button').forEach(function(btn) {
                btn.classList.remove('active');
            });
            // Add active class to clicked tab
            clickedButton.classList.add('active');
        }

        // Add loading indicators
        document.body.addEventListener('htmx:beforeRequest', function(evt) {
            const target = evt.target;
            if (target.classList.contains('lazy-load-btn')) {
                target.innerHTML = '<span class="spinner"></span> Loading...';
                target.disabled = true;
            }
        });

        document.body.addEventListener('htmx:afterRequest', function(evt) {
            const target = evt.target;
            if (target.classList.contains('lazy-load-btn')) {
                target.style.display = 'none';
            }
        });

        // Add smooth transitions for HTMX swaps
        document.body.addEventListener('htmx:beforeSwap', function(evt) {
            if (evt.target.id === 'tab-content') {
                evt.target.style.opacity = '0.5';
                evt.target.style.transform = 'translateY(10px)';
            }
        });

        document.body.addEventListener('htmx:afterSettle', function(evt) {
            if (evt.target.id === 'tab-content') {
                evt.target.style.opacity = '1';
                evt.target.style.transform = 'translateY(0)';
            }
        });
    </script>
</body>
</html>
{{end}}